# 블로그 다시 만들기 81일차

1일1커밋 무사고: 1012일차

## 감사일기

1. ???

## todo

- [ ] 운동
  - [ ] 헬스
  - [ ] 자전거
  - [ ] 클라이밍
    - [ ] 주말 1회
- [ ] Do it C++ 코딩 테스트
  - [ ] C++ nvim DAP에 표준입력이 가능하게 설정해보기
  - [ ] 2일차
    - 읽다가 사이드 퀘스트가 생겼습니다.
- [ ] 마이크로 튜토리얼
  - [ ] Chapter 3 - Requests
  - [ ] Chapter 4 - Request Lines
  - [ ] Chapter 5 - HTTP Headers
  - [ ] Chapter 6 - HTTP Body
  - [ ] Chapter 7 - HTTP Responses
  - [ ] Chapter 8 - Chunked Encoding
  - [ ] Chapter 9 - Binary Data
- [ ] 블로그 다시 만들기 전 실험
  - [ ] vite로 github pages가 정적 리소스 응답하는 방식 흉내내기
  - [ ] ToC
    - [ ] `data.json`에 h1 ~ h6에 해당하는 데이터 추가
    - [ ] DOM에 붙이기
  - [ ] 검색 팝업에서 tag 클랙해도 input 상태 보존하기
- [ ] 취미로 읽는 통계 관련 자료들
  - [ ] 조사론 필기 옮기기
    - [ ] 6장
    - [ ] 7장
    - [ ] 8장
    - [ ] 9장
    - [ ] 복습

---

## Chapter 3 - Requests

- https://youtu.be/FknTw9bJsXM?t=1728
- 왜 http를 사용하는가? 이미 tcp가 모든 패킷이 오고 순서도 보장을 해주는데 굳이 http를 사용하는 이유는 무엇인가?
  - tcp는 데이터의 순서와 데이터의 도착만 보장합니다. 하지만 무슨 데이터를 주는지 알 수 없습니다.
  - http는 도착지 주소가 있습니다. 이런저런 정보에 대한 정보가 해더에 있습니다.
  - RFC 9110, 9112는 http 표준 시멘틱이 있습니다.
  - http 메시지는 요청응답을 포괄합니다.
  - `\r\n`으로 http의 줄단위 구분을 합니다.

```http 
foo: bar\r\n
\r\n
{
  "body": "json content"
}
```

- 위 `foo: bar`까지가 header 정보이고 body 정보는 앞게 키와 값이 없는 빈 `\r\n`으로 구분합니다.
- 9110 문서를 정독할 것을 권장합니다. http를 이해하기 좋습니다.
- tcp는 슬라이딩 윈도우의 단점인 일부 패킷이 없으면 윈도우를 계속 이동하게 만들기 어렵습니다.
- 오늘 네트워크는 극도로 신뢰성이 높습니다. udp는 동작이 별로 없어서 오버해드를 많이 아낄 수 있습니다.
- RFC 9112는 http 1.1에 대한 명세이고 다른 http 버전을 이해할 수 있게 해줄 것입니다.
- https://datatracker.ietf.org/doc/html/rfc9112#name-message-format

```sh 
go run ./cmd/tcplistener | tee ./tmp/rawget.http
```

```sh 
curl http://localhost:42069/coffee
```

- 위 2개의 명령을 터미널에 히면 아래 내용을 얻을 수 있습니다.
- http 요청 메시지로 해더 정보를 볼 수 있습니다.
- 여기서 흥미로운 점은 curl로 보낸 http 요청은 계속 요청을 처리하는 상태로 남아있습니다.
  - 현재 네트워크 연결은 tcp를 http로 연결을 시도하기 때문입니다.

```
read: GET /coffee HTTP/1.1
read: Host: localhost:42069
read: User-Agent: curl/8.7.1
read: Accept: */*
```


```
start-line CRLF
*( field-line CRLF )
CRLF
[ message-body ]
```

- start-line CRLF, POST /users/primeagen HTTP/1.1입니다.
- field-line은 해더정보입니다.
