1일1커밋 무사고: 168일차

03:59

# todo

- [ ] 모노레포 복습
- [x] 리팩토링 읽기
  - [ ] CHAPTER 02 리팩터링 원칙
    - [x] 2.6 리팩터링, 아키텍처, 애그니(YAGNI)
- [ ] 이력서
  - [x] 줄바꿈 추가
  - [ ] ~~ JWT 토큰 활용과 테스트 코드 작성 ~~
    - 대단한 경험이 아닙니다.
  - [ ] 자소서 조합
- [x] 1일3제
- [x] 면접질문 답변

# want todo

- [x] 개발자 블로그
  - [x] nav
  - [x] 로고
  - [x] 사이드바

# vim

- `leader` + `w`: 세로 터미널 열기
- `leader` + `v`: 가로 터미널 열기 
- `exit` 커맨트로 탈출할 수 있습니다.

# 면접 질문 답변: CI/CD란 무엇인가?

코드를 자주 합치고 배포하자는 개발의 운영방식입니다.

먼저 CI는 계속적인 통합이라고 직역합니다. 여기서 통합하는 대상은 개발자의 코드입니다. 코드를 합칠 때는 여러 주의가 많이 필요합니다. 처음에는 작게 PR 리뷰를 통해 합치는 방식이 일반적이지만 코드베이스의 규모가 커지면서 타입체킹, 포멧체킹, 테스팅과 같은 과정 이후에 합칠 수 있도록 합니다. CI는 코드, 빌드, 테스트, 릴리스의 과정입니다.

CD는 배포, 운영, 모니터링, 계획의 과정입니다. 굉장히 복잡하거나 상태성을 갖는 시스템은 CD를 잘 실천하지 않습니다. 넷플릭스 백엔드 서비스처럼 복잡하거나 DB, 웹 소켓처럼 상태를 갖는 경우에 해당합니다. 하지만 무상태성을 갖는 시스템은 도입이 현실적입니다. CD는 신기능을 자주 출시하고 피처플래그를 감싸하서 버그가 발생하면 신기능을 바로 취소합니다. 또 전제 유저가 아닌 카나리 배포전략으로 특정 해비유저의 테스트 케이스를 모니터링하고 전체로 확대하는 전략을 적용합니다.

CI/CD를 잘 실천하면 좋은 개발환경과 품질높은 소프트웨어를 사용자에게 전달할 수 있습니다.

---

CI/CD In 5 Minutes | Is It Worth The Hassle: Crash Course System Design #2

https://www.youtube.com/watch?v=42UP1fxi2SY

CI/CD는 코드완성 후 커밋부터 배포까지 과정을 자동화합니다. 사람이 수동으로 제어해야 하는 부분을 자동화합니다.

소프트웨어팀이 더 높은 코드퀄리티로 제품을 전달한다고 합니다. 이론과 실제는 상황에 따라 다릅니다.

CI는 생각보다 쉽게 도입할 수 있습니다. 일찍 자주 공유하는 레포에 잘 병합하도록 합니다. CI는 보통 좋은 테스트에 의존을 많이 합니다. 테스트 커버리지가 높으면 처리시간이 길어집니다. 소스코드 서비스를 잘 활용해야 합니다. github actions를 많이 이용합니다. 빌드 테스트 배포를 자주 합니다. 보통 테스트는 언어에 좌우되기도 합니다. 빌드는 상태계에 따라 다르게 적용해야 합니다. 자바스크립트의 경우 웹팩이 가장 널리 사용합니다.

CD는 계속적인 배포입니다. 존재는하지만 생각보다 어렵습니다. 많은 경우 CI만 도입하는 경우가 많습니다. 대부분 팀은 아주 기본적인 시스템에서만 CD를 도입합니다. 웹서버 티어 혹은 API처럼 무상태성을 갖는 경우에 적용합니다. 보통 이런 무상태성을 갖는 시스템에 도입하는 이유는 롤백이 쉽고 리스크가 낮습니다. 또 신기능으 피처플래그로 감싸는 경우가 일반적입니다. 배포와 활성화를 분리합니다. 이렇게 하는 이유는 완전한 롤백 없이 특정 기능만 해제하기 위해서 적용합니다. 규모가 큰 시스템에는 카나리 배포를 활용하는 경우가 흔합니다. 보통 파워유저에게 먼저 배포하고 여기서 버그를 찾고 전체로 배포합니다. 이렇게 하면 피해범위는 축소하고 실제와 비슷한 환경에서 실험해볼 수 있게 됩니다. 상태를 갖는 시스템(DB, 웹 소캣)에는 대부분 CD를 실천하지 않습니다. 이런 경우 전념하는 플랫폼 팀이 따로 필요합니다. CD로 github action, buildkite, jenkins를 자주 사용합니다. k8r는 argo CD를 많이 활용합니다.

모두에게 적용할 수 있는 것은 아니고 시스템의 규모와 복잡도에 따라 다르게 적용해야 합니다.

