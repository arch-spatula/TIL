1일1커밋 무사고: 178일차

04:55

# TIL

## todo

- [x] 블로그 개발
  - [x] 오늘 blog 마크다운
  - [x] 이슈 닫기
  - [x] 1주차 마이그레이션
- [ ] ~~월요일: 11:00 지로스터 20:00~~
  - 11시 출근 실패
  - 아침 식사 시간
  - 조기퇴근 저녁식사
- [x] 사이클 17분
- [x] 코테 1시간
- [x] 면접 질문

## 면접질문 답변: 하이드레이션에 대해 알고 있나요

하이드레이션이란 클라이언트에게 자바스크립트를 전달해서 클라이언트가 동적경험을 할 수 있도록 하는 개념입니다. Next.js의 경우 CSR만 완전히 하이드레이션을 제공하고 있습니다. Next.js를 통해서 하이드레이션을 확보하고 싶으면 다른 라이브러리를 활용해야 하고 라이브러리가 제공하는 하이드레이션도 완전하지 않습니다. 예를 들어 React-Query 부분하이드레이션도 통신과 관련된 자바스크립트 동작을 전달하기 위해서 제공할 뿐 동적인 경험을 제공할 수 없습니다.

과거 SPA는 클라이언트에게 앱같은 동적인 경험을 제공할 수 있습니다. 이미 클라이언트에게 자바스크립트를 전달받았기 때문에 그렇습니다. 하지만 자바스크립트 사이즈가 커지면서 이니셜 페이지로드 시간이 커집니다. 그래서 나온 해결책으로 자바스크립트 전달하는 사이즈를 줄이기 위해 SSR, SSG, ISG 기술을 활용하기 시작했습니다. 하지만 자바스크립트를 전달하지 않기 때문에 가끔 자바스크립트로 필요한 동적인 경험을 제공할 수 없게 됩니다.

이런 한계를 다른 프레임워크와 라이브러리는 부분 하이드레이션을 제공하기도 합니다. astro, deno-fresh가 부분적으로 독립적인 자바스크립트를 전달하는 것으로 이런 동적인 경험제공 문제를 해결합니다. 부분적으로 독립적인 자바스크립트를 전달해 하이드레이션할 수 있게 된 아키텍쳐를 보고 아일랜드 아키텍쳐라고 부릅니다. 하지만 이 아일랜드 아키텍처도 한계가 있습니다. 아일랜드 아키텍쳐로 전달된 자바스크립트는 모두 독립적인 자바스크립트 모듈입니다. 자바스크립트의 자원 공유를 할 수 없습니다. 만약 통신과 관련되어 있다면 하나의 앱에서 2개의 아일랜드가 하나의 요청으로 받을 수 있었을 데이터를 각각 2번 요청해야 할야 합니다.

이런 하이드레이션 문제는 요구사항에 따라 레이드오프를 적절히 고르는 문제입니다. 커머스처럼 동적인 경험이 많이 필요 없고 통신이 많으면 Next.js로 프리랜더링으로 해결합니다. 마케팅 사이트처럼 통신이 많지 않고 동적인 경험을 제공해야 할 때는 astro를 활용해서 아일랜드 아키텍쳐로 좋은 사용자 경험을 제공합니다. SaaS 제품으로 동적인 경험과 통신이 많은 경우 전통적인 CSR로 React.js를 활용하는 것이 좋을 수 있습니다.

