1일1커밋 무사고: 184일차

00:00

# TIL

## Todo

- [x] flash-card-backend db API
  - [x] update
  - [x] delete
- [x] 블로그 관리
  - [x] deno, axios, MongoDB 에러 처리
  - [x] 개인 블로그 2개 이상 이월하기
- [x] 자료구조 & 알고리즘 복습 시스템
- [x] 면접 질문 2개 2시간 이하
- [x] 1일3제
- [x] 5분 명상

## 리액트 테스트 전략

리액트를 활용해서 MVC 패턴으로 관심사를 분리하는 것은 가능합니다. 관심사를 분리하면 관심사별로 테스트를 작성하기 수월해집니다.

테스트를 잘 작성하기 전에 먼저 관심사를 분리하는 개념부터 갖고 있어야 합니다. JSX는 View를 담당해야 하고 hook은 Controller를 담당합니다. Props와 State는 Model을 담당하는데 class 인스턴스로 생성해서 제어하도록 합니다. Model에서 어떻게 갱신할지에 대한 로직을 모두 갖고 처리합니다.

### 컴포넌트를 테스트하는 방법

조건별로 올바르게 랜더링하는지 테스트하면 됩니다.

### Model을 테스트하는 방법

리액트가 아닌 전통적인 테스트방법을 그대로 적용하면 됩니다.

### hook을 테스트하는 방법

hook에 대한 테스트가 성공하면 결합테스트에서 비중을 많이 차지하는 부분 중 하나가 된 것입니다.

hook을 테스트할 때 고려해야 할 점들이 있습니다. hook은 이벤트를 처리하는 함수들이 있고 이 이벤트가 어떻게 state 변형하는지 검증이 필요합니다. 즉 조건은 함수의 실행이고 검증할 결과는 state가 가져야할 값입니다.

### API를 테스트하는 방법

백엔드 엔지니어가 이미 API 명세까지만 진행했으면 테스트로 얻을 수 있는 이익이 더 많습니다.

MSW로 통신을 테스트하는 것이 일반적입니다. 특정 엔드포인트가 어떻게 동작해야 할지 사전에 설정하고 테스트를 작성하고 구현합니다.

### 결합테스트

프론트엔드 엔지니어로서 가장 작성을 많이해야 하는 테스트는 결합 테스트입니다.

결합테스트는 위 4가지 테스트 분야 중 각각 1개를 섞어서 작성하면 됩니다.

API 통신에 따라 컴포넌트 랜더링은 어떻게 다르게 할지 정할 수 있습니다.

Model이 올바르게 요청을 보낼 수 있는 형식인지 검증해볼 수 있습니다.

hook 이 통신을 올바르게 데이터를 처리하는지 검증해볼 수 있습니다. hook이 컴포넌트, model, API와 결합했을 때 올바르게 처리하는지 검증해볼 수 있습니다.

## 누산기

오늘 배운 용어입니다.

누산기(累算器) 또는 어큐뮬레이터(accumulator)는 컴퓨터의 중앙 처리 장치(CPU)에서 중간 산술 논리 장치 결과가 저장되는 레지스터이다.

[누산기 - wikipedia](https://ko.wikipedia.org/wiki/%EB%88%84%EC%82%B0%EA%B8%B0)

## 면접 질문

### 브라우저의 렌더링 과정에 자바스크립트는 어떻게 동작하나요?

크롬 브라우저를 기준으로 설명하겠습니다. 크롬의 경우 HTML과 CSS를 랜더링 처리할 때는 Blink 랜더엔진을 활용합니다. 하지만 자바스크립트의 경우 V8 엔진을 활용합니다. 브라우저는 HTML과 CSS를 처리하는 중간에 script 태그를 보면 script부터 자바스크립트 엔진이 처리하도록 하고 완료 되었을 때 다시 HTML, CSS가 처리하도록 합니다.

script 태그를 만나면 자바스크립트 소스코드를 스트리밍하면서 처리하는 것으로 시작합니다. 이 때 처리하는 주체는 scanner입니다. scanner는 토큰을 생성해줍니다. let, for 같은 키워드 부터 함수명, 값 등 의미를 기준으로 처리합니다. 생성된 토큰은 AST로 변환하는데 Parser가 이 과정을 처리합니다. AST를 만들고난 뒤에 컴파일 처리를 하는데 이 때 Ignition이 바이트 코드로 컴파일 처리를 합니다. 여기까지가 컴파일 과정입니다. 다음은 최적화입니다. 바이트 코드를 갖고 자바스크립트를 실행하지만 동시에 Profiling을 합니다. Profiling은 최적화시킬 수 있는 부분을 찾아 TurboFan으로 메모리 사용량과 속도 최적화를 처리합니다. 최적화를 할 때 AST를 그래프 자료로 생성합니다. 그래프를 기반으로 중복을 제거해서 공간복잡성을 줄입니다. 또 사용하지 않는 코드는 제거합니다. 그 후에 레지스터에 할당합니다.

V8엔진의 역할은 다양합니다.

- Ignition을 이용해서 자바스크립트 소스코드를 컴파일하고 실행합니다.
- TurboFan을 이용해서 최적화를 합니다.
- 생성한 객체를 메모리에 할당합니다.
- 더이상 참조하지 않는 객체를 가비지 컬랙팅합니다.

자바스크립트가 JIT 컴파일 방식을 이용하게 된 이유는 브라우저 특성상 새로 고침이 많고 동적으로 화면을 갱신을 자주하는데 자바스크립트의 동일한 코드를 동일하게 다시 실행하고 처리하면 비효율적입니다. 효율적이게 자바스크립트가 갱신된 부분은 컴파일하는 방법으로 구현되어 있습니다. 성능을 높이기 위해 자바스크립트는 바이트코드로 캐싱하고 다시 컴파일할 때 참조합니다.

자바스크립트 엔진이 다루는 영역입니다.

---

[BlinkOn 6 Day 1 Talk 2: Ignition - an interpreter for V8](https://www.youtube.com/watch?v=r5OWCtuKiAk)

[V8 에서 Javascript 코드를 실행하는 방법 정리해보기](https://pks2974.medium.com/v8-%EC%97%90%EC%84%9C-javascript-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%8B%A4%ED%96%89%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-%EC%A0%95%EB%A6%AC%ED%95%B4%EB%B3%B4%EA%B8%B0-25837f61f551)

### 호출 스케쥴링이 무엇인가요?

사전적인 정의는 다음과 같습니다.

> 일정 시간이 지난 후에 원하는 함수를 예약 실행(호출)할 수 있게 하는 것을 '호출 스케줄링(scheduling a call)'이라고 합니다.
>
> - 모던 자바스크립트 튜토리얼

일정 시간을 예약하는 것이 스케줄링입니다. 그리고 호출하고 실행이 call입니다.

자바스크립트의 경우 `setTimeout`과 `setInterval`으로 구현하고 처리합니다.

주의해야 할 것들이 있습니다. 스케줄링을 하면 메모리 누수가 발생할 수 있기 때문에 필요 없는 시점에 `clear` 해주도록 합니다. 그렇지 않으면 백그라운드에서 계속 메모리 공간을 차지할 것입니다.

스케줄러 함수가 반환하는 식별자를 활용해서 `clear` 해주면 되지만 식별자의 형식에 대한 정확한 명세는 현재도 없습니다.

스케줄링은 CPU 소모가 큰 작업에 유용합니다.

---

[setTimeout과 setInterval을 이용한 호출 스케줄링 - ](https://ko.javascript.info/settimeout-setinterval)
