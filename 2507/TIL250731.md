# 블로그 다시 만들기 31일차

1일1커밋 무사고: 962일차

## 감사일기

1. ???

## todo

- [ ] 블로그 다시 만들기 전 실험
  - [ ] 검색 만들기
    - [x] input 만들기
    - [ ] 검색 목록이 search popup에서 보이게 하기
    - [ ] tag 보여주기
    - [ ] url에 상태 추가
  - [ ] ToC
    - [ ] `data.json`에 h1 ~ h6에 해당하는 데이터 추가
    - [ ] ???
- [ ] 데이터 시각화 옵시디언으로 마이그레이션
  - [ ] 위치
    - [x] 카토그램(Cartogram)
    - [ ] 돌링 카토그램(Dorling Cartogram, Dorling map)
    - [ ] 타일 격자 지도(Tile Grid map, Grid map, Equal-area cartogram)

---

## 검색 만들기

- 진짜 검색 엔지니어링 이라는 데이터베이스 과목을 선수강하고 구현해보는 전공 과목 수준의 검색이 아닙니다.
  - 이런 내용은 저의 커리어를 통틀어 언젠가 반드시 정복해야 하는 내용 중 하나입니다.
- 이번 개발 목표는 `data.json`을 활용해서 tag 상태를 관리하고 찾고자하는 글을 쉽게 찾게 해주는 것입니다.

### overlay 100vw은 스크롤을 만듭니다.

- https://stackoverflow.com/questions/33606565/is-it-possible-to-calculate-the-viewport-width-vw-without-scrollbar
- 위는 검색으로 알아냈습니다.

```css
.class {
  width: calc(100vw - (100vw - 100%));
}
```

- `100vw - 100%`이 논리적으로 스크롤바의 너비에 해당하는 것으로 추정이 됩니다.
- 스크롤바가 이미 있는 화면에서 `100vw`은 뷰포트 기준으로 채우고 스크롤을 포함하면 넘치기 때문에 하단에 스크롤이 발생합니다.
- 궁금한 점은 `100vw - 100%`이 어떻게 오른쪽 스크롤에 해당할 수 있는지 입니다.
  - `100%`는 부모로의 너비 값을 그대로 활용한다는 의미입니다.
  - `100%`으로 부모의 너비는 스크롤이 빠진만큼의 너비를 갖고 있다고 추측할 수 있습니다.
  - 그렇다면 명세서 관점에서는 어떻게 이것을 타당하게 생각할 수 있는지 의문입니다.

### keydown 이벤트 처리하기

- 키에 따라 다양한 전략 패턴 비슷하게 처리해야 하는 상황이 생겼는데 어떻게 분기처리하는지 몰랐습니다.

```ts
/**
 * popup을 제어함
 * @todo 이미 popup이 활성화 되어 있으면 popup을 닫음
 * @todo 백드롭 오버레이 추가
 */
const handlePopup = (e: KeyboardEvent) => {
  if ((e.ctrlKey || e.metaKey) && e.key === "k") {
  }

  switch (e.key) {
    case "Escape": {
      console.log("Escape");
      break;
    }
    case "Enter": {
      console.log("Enter");
      break;
    }
    case "ArrowUp": {
      console.log("Up arrow pressed");
      break;
    }
    case "ArrowDown": {
      console.log("Down arrow pressed");
      break;
    }
  }
};

const main = async () => {
  window.addEventListener("keydown", handlePopup);
};

main();
```

- 위처럼 처리하면 ESC, Enter, 방향키 모두 처리할 수 있습니다. ctrl + k는 중요해서 따로 뒀습니다.

### 정말 DOM에서 제거해야 하는가?

- DOM을 조작하고 갱신해야 하는 것은 맞지만 모든 것을 제거할 필요는 없을 것 같습니다.
- 검색으로 보이는 하위 목록만 동적으로 추가 혹은 제거만 하면 됩니다.

### css has 문

- 자식에 focus가 되었을 때 부모의 스타일을 바꾸는 방법이 있습니다.

```css
/* Selects the parent element only if it contains a child element that is being hovered */
.parent:has(.child:hover) {
  background-color: lightblue; /* Example style change for the parent */
}
```

- 이것이 가장 단순한 예시인 것 같습니다.

### svg css 컬러 지정

- https://stackoverflow.com/questions/22252472/how-can-i-change-the-color-of-an-svg-element
- https://codepen.io/sosuke/pen/Pjoqqp
- 예전에 봤던 링크라는 것이 기억납니다.



