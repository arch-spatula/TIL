# AoC 일찍 포기하고 플래시카드 만들기 57일차

1일1커밋 무사고: 786일차

## 감사일기

1. ???

## todo

- [ ] 플래시카드 관리
  - [ ] 73개 남음
  - [ ] 맞춤법 개념 추가
- 플래시카드
  - [ ] tag 분류 추가
    - 문제가 너무 많고 특정 분야를 집중하고 싶을 때 사용해야 함.
    - [ ] 선택된 태그들에 따라 셔플하고 카드 찾기
    - [ ] 테스트 코드 작성이 좋은 전략처럼 보이는지 판단
    - [ ] card table에서 분야 설정

---

## 태그 셔플

- 플래시카드 기능 중에 셔플 기능은 백엔드 API로 처리하고 있었습니다. 카드를 그냥 다주는 것보다 무슨 카드를 어떻게 줄지 처리하는 로직은 백엔드에서 처리하기 더 쉬워보였습니다.

### 문제: 추가하는 분야는 다양하지만 시험 기간에는 집중해야 함

- 역시 또 새로운 문제가 생겼습니다. 저는 비교적 관심사가 다양해서 다양한 분야에 해당하는 태그를 추가했습니다.
- 이슈가 되는 것은 저는 정보처리기사에 집중해야 하는데 영단어, 한자, 맞춤법에 해당하는 카드도 같이 나오고 있다는 것입니다.
- 이 문제는 문제가 맞습니다. 사용자가 추가는 다양하게 하지만 집중은 특정 분야만 집중하게 만들고 싶기 때문입니다.
  - 저는 이 제품을 제가 정보처리기사를 따기 위해 만든 제품입니다.

### 시도 1: 쿼리를 전략 패턴으로 구현하기

- 이 문제를 해결하기 위해서 저는 처음에 쿼리를 변경하고 전략 패턴을 수행하자는 생각을 했습니다.
- 태그 전체를 선택했을 때 사용할 쿼리, 아무 태그도 없을 때 선택할 태그, 일부 선택된 태그 이렇게 3가지 쿼리를 추가하고 서비스 계층에서 전략별로 쿼리를 수행하게 만들 생각이었습니다.
- 여기서 생기는 문제는 쿼리를 날릴 기준으로 한 테이블은 카드로 생각하고 있었는데 태그는 매핑 테이블로 다대다 관계를 갖고 있습니다. 여기를 기준으로 쿼리를 날려야 합니다. 하지만 이렇게 되면 날짜를 쿼리하고 난 다음에 필터를 걸어야 합니다.
- 이렇게 되면 오히려 다대다 테이블의 정규화를 포기하고 반정규화를 하는 것이 성능을 높일 것입니다.
- 현실적으로 반정규화가 필요할 정도로 탐색할 테이블 사이즈가 커지는게 아니기 때문에 반정규화는 필요가 없을 것 같습니다.
  - 물론 나중에 제품을 오래 사용하면서 성능이 문제 될정도로 데이터를 많이 적재한다면 반정규화로 개선할 가치가 있을 것입니다.

### 시도 2: 서비스 계층에서 추가 후처리

- 그냥 단순하게 쿼리는 1개로 유지하고 전략 패턴별로 후처리하는게 제일 쉬울 것 같습니다. 
- 제일 단순할 것이라고 예상되는 이유는 조회된 결과 태그 확인해보고 목록에 있는지 체크하면 됩니다.
- 이렇게 되면 기존 응답 타입형태도 유지하는 것이 가능할 것입니다.

### 해결: ???

### 학습: ???

## 비밀 번호를 관리하는 방법

- https://www.youtube.com/watch?v=YY2a1AWlmKo
